<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Game.Chess.Position</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Game-Chess-Position.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cx-0.1.0.0: Chess eXperiment</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Game.Chess.Position</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:movePosition">movePosition</a> :: (<a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>, <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Game-Chess-Types.html#t:Position">Position</a></li><li class="src short"><a href="#v:apVector">apVector</a> :: <a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [(<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>, <a href="Game-Chess-Types.html#t:Position">Position</a>)]</li><li class="src short"><a href="#v:apVectors">apVectors</a> :: [<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>] -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [[(<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>, <a href="Game-Chess-Types.html#t:Position">Position</a>)]]</li><li class="src short"><a href="#v:getValidSlidingMoves">getValidSlidingMoves</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; [(<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>, <a href="Game-Chess-Types.html#t:Position">Position</a>)] -&gt; [<a href="Game-Chess-Types.html#t:Position">Position</a>]</li><li class="src short"><a href="#v:getValidMoves">getValidMoves</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; [<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>] -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [<a href="Game-Chess-Types.html#t:Position">Position</a>]</li><li class="src short"><a href="#v:isAttacked">isAttacked</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>] -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:validateMove">validateMove</a> :: <a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; <a href="Game-Chess-Types.html#t:MoveValidity">MoveValidity</a></li><li class="src short"><a href="#v:generate">generate</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [<a href="Game-Chess-Types.html#t:Board">Board</a>]</li><li class="src short"><a href="#v:allMoves">allMoves</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; [<a href="Game-Chess-Types.html#t:Board">Board</a>]</li><li class="src short"><a href="#v:movesTree">movesTree</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Game-Chess-Types.html#t:GameTree">GameTree</a></li><li class="src short"><a href="#v:generateSuggestion">generateSuggestion</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Game-Chess-Types.html#t:Board">Board</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:movePosition" class="def">movePosition</a> :: (<a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>, <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Game-Chess-Types.html#t:Position">Position</a> <a href="#v:movePosition" class="selflink">#</a></p><div class="doc"><p>Given a position vector in the form (file, rank), add it to a given
 <code><a href="Game-Chess-Types.html#t:Position">Position</a></code>, and return the result so long as we remain in a valid <code><a href="Game-Chess-Types.html#t:Position">Position</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:apVector" class="def">apVector</a> :: <a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [(<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>, <a href="Game-Chess-Types.html#t:Position">Position</a>)] <a href="#v:apVector" class="selflink">#</a></p><div class="doc"><p>Given a <code><code><a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a></code> <code><a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a></code></code> and a starting <code><a href="Game-Chess-Types.html#t:Position">Position</a></code>, &quot;slide&quot; the
 piece to each square recursively in the direction of moving vector. Note that
 here we don't take into account whether or not the move is actually valid,
 other than ensuring that we remain on the board.</p></div></div><div class="top"><p class="src"><a id="v:apVectors" class="def">apVectors</a> :: [<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>] -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [[(<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>, <a href="Game-Chess-Types.html#t:Position">Position</a>)]] <a href="#v:apVectors" class="selflink">#</a></p><div class="doc"><p>Given a list of moving vectors and a position, return a list of lists,
 where each inner list contains possible (unvalidated) moves in each possible
 direction.</p></div></div><div class="top"><p class="src"><a id="v:getValidSlidingMoves" class="def">getValidSlidingMoves</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; [(<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>, <a href="Game-Chess-Types.html#t:Position">Position</a>)] -&gt; [<a href="Game-Chess-Types.html#t:Position">Position</a>] <a href="#v:getValidSlidingMoves" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="Game-Chess-Types.html#t:Board">Board</a></code> and a list of unvalidated <code>Positions</code> we might want to move
 to, validate each position and see if we can, in fact, move there. In the
 future, the validator will need to know the kind of <code><a href="Game-Chess-Types.html#t:Piece">Piece</a></code> being moved so it
 can check for things like the moving side being in check.</p><p>This function lets us move up until a move becomes invalid.</p><p>The second parameter carries along a <code><code><a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a></code> <code><a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a></code></code> which is used for
 validation later on. Namely, it is used for as a justification for why a
 particular position has been reached. This is important because we must
 handle pawns differently due to how they capture, although there might be a
 cleaner approach.</p></div></div><div class="top"><p class="src"><a id="v:getValidMoves" class="def">getValidMoves</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; [<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>] -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [<a href="Game-Chess-Types.html#t:Position">Position</a>] <a href="#v:getValidMoves" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="Game-Chess-Types.html#t:Board">Board</a></code>, a list of moving vectors, and the <code><a href="Game-Chess-Types.html#t:Position">Position</a></code> that we are
 currently at, return a list of validated positions to which we can move.</p><p>This basically just combines all of the above machinery into an easy-to-use
 function that we can use in <code><a href="Game-Chess-Position.html#v:generate">generate</a></code> below.</p></div></div><div class="top"><p class="src"><a id="v:isAttacked" class="def">isAttacked</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [<a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a>] -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:isAttacked" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="Game-Chess-Types.html#t:Board">Board</a></code>, an origin <code><a href="Game-Chess-Types.html#t:Position">Position</a></code>, a query <code><a href="Game-Chess-Types.html#t:Position">Position</a></code> and a list of
 moving vectors, determine whether or not the query <code><a href="Game-Chess-Types.html#t:Position">Position</a></code> is currently
 under attack.</p><p>We generate a list of valid moves, and simply determine if the query position
 is one of those moves. Note that this does _NOT_ yet account for pawn-takes.</p><p>This can be specialized to test for check.</p></div></div><div class="top"><p class="src"><a id="v:validateMove" class="def">validateMove</a> <a href="#v:validateMove" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>The <code><a href="Game-Chess-Types.html#t:MovingVector">MovingVector</a></code> that made us go to the <code><a href="Game-Chess-Types.html#t:Position">Position</a></code></p></td></tr><tr><td class="src">-&gt; <a href="Game-Chess-Types.html#t:Position">Position</a></td><td class="doc"><p>The new <code><a href="Game-Chess-Types.html#t:Position">Position</a></code> we would go to</p></td></tr><tr><td class="src">-&gt; <a href="Game-Chess-Types.html#t:Board">Board</a></td><td class="doc"><p>The current game state</p></td></tr><tr><td class="src">-&gt; <a href="Game-Chess-Types.html#t:MoveValidity">MoveValidity</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Can the given move legally be made?</p><p>Note that this is *not* a comprehensive check! In particular, it checks only
 the following things:</p><ul><li>The moving side cannot capture its own piece.</li><li>(TODO!) A king cannot be captured.</li><li>(TODO!) The move will not place the moving side in check.</li></ul></div></div><div class="top"><p class="src"><a id="v:generate" class="def">generate</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; <a href="Game-Chess-Types.html#t:Position">Position</a> -&gt; [<a href="Game-Chess-Types.html#t:Board">Board</a>] <a href="#v:generate" class="selflink">#</a></p><div class="doc"><p>Move generation!</p></div></div><div class="top"><p class="src"><a id="v:allMoves" class="def">allMoves</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; [<a href="Game-Chess-Types.html#t:Board">Board</a>] <a href="#v:allMoves" class="selflink">#</a></p><div class="doc"><p>Determine possible moves for the side to move.</p></div></div><div class="top"><p class="src"><a id="v:movesTree" class="def">movesTree</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Game-Chess-Types.html#t:GameTree">GameTree</a> <a href="#v:movesTree" class="selflink">#</a></p><div class="doc"><p>Generate a <code><a href="Game-Chess-Types.html#t:GameTree">GameTree</a></code> by calling <code><a href="Game-Chess-Position.html#v:allMoves">allMoves</a></code> the appropriate number of times
 depending on the <code>depth</code>.</p></div></div><div class="top"><p class="src"><a id="v:generateSuggestion" class="def">generateSuggestion</a> :: <a href="Game-Chess-Types.html#t:Board">Board</a> -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Game-Chess-Types.html#t:Board">Board</a> <a href="#v:generateSuggestion" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>